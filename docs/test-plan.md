# 딱내폰 종합 테스트 계획서

## 1. 개요

### 1.1 목적
딱내폰 플랫폼의 모든 사용자/관리자 기능을 E2E 테스트로 검증하여 프로덕션 배포 전 품질을 보증한다.

### 1.2 범위
- **Web 프론트엔드** (http://localhost:3000): 사용자 대면 마켓플레이스
- **Admin 프론트엔드** (http://localhost:3002): 관리자 백오피스
- **API 백엔드** (http://localhost:3001/api): REST API
- **데이터베이스**: PostgreSQL 정합성 검증

### 1.3 접근 방법
- 모든 테스트는 **Playwright MCP 브라우저 자동화**로 실행
- 데이터 검증은 API 호출 또는 DB 직접 조회로 확인
- 테스트 순서: 인증 → 조회 → 생성 → 수정 → 삭제 (의존성 순)

### 1.4 테스트 환경

| 항목 | 값 |
|------|-----|
| Web URL | http://localhost:3000 |
| Admin URL | http://localhost:3002 |
| API URL | http://localhost:3001/api |
| 일반 사용자 | test@example.com / Test123! |
| 관리자 | admin@phonegabi.com / Admin123! |
| DB | PostgreSQL (docker-compose) |
| 브라우저 | Chromium (Playwright) |

### 1.5 테스트 ID 규칙

```
TC-{영역}-{기능}-{번호}

영역:
  WEB = 사용자 웹
  ADM = 관리자
  INT = 통합 테스트

기능:
  AUTH = 인증, BROWSE = 탐색, CART = 장바구니
  ORDER = 주문/결제, SELL = 판매접수, ACCT = 계정관리
  REVIEW = 리뷰, PRICE = 시세, CONTENT = 콘텐츠
  NAV = 네비게이션, DASH = 대시보드, USER = 사용자관리
  PROD = 상품관리, ORD = 주문관리, SELLMGT = 매입관리
  CMS = CMS관리, SUPER = 슈퍼관리자

우선순위:
  P0 = 크리티컬 (핵심 비즈니스 로직, 결제, 인증)
  P1 = 높음 (주요 사용자 기능)
  P2 = 보통 (부가 기능)
  P3 = 낮음 (UI 표시, 정적 페이지)
```

---

## 2. WEB 단위 기능 테스트

### 2.1 인증 (AUTH)

#### TC-WEB-AUTH-001: 로그인 페이지 표시
- **우선순위**: P0
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/auth/login` 페이지 접속
  2. 페이지 요소 확인
- **기대결과**:
  - "로그인" 제목 표시
  - 이메일 입력 필드 표시 (placeholder: "이메일을 입력하세요")
  - 비밀번호 입력 필드 표시 (placeholder: "비밀번호를 입력하세요")
  - "로그인" 버튼 표시
  - "회원가입" 링크 표시
- **결과**: ⏳

#### TC-WEB-AUTH-002: 올바른 자격증명으로 로그인 성공
- **우선순위**: P0
- **전제조건**: 비로그인 상태, 시드 데이터 존재
- **단계**:
  1. `/auth/login` 페이지 접속
  2. 이메일: `test@example.com` 입력
  3. 비밀번호: `Test123!` 입력
  4. "로그인" 버튼 클릭
- **기대결과**:
  - 홈페이지(`/`)로 리다이렉트
  - 헤더에 사용자 이름 표시
  - localStorage에 토큰 저장됨
- **DB 검증**: `User` 테이블에서 `lastLoginAt` 업데이트 확인
- **결과**: ⏳

#### TC-WEB-AUTH-003: 잘못된 비밀번호로 로그인 실패
- **우선순위**: P0
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/auth/login` 페이지 접속
  2. 이메일: `test@example.com` 입력
  3. 비밀번호: `WrongPass123!` 입력
  4. "로그인" 버튼 클릭
- **기대결과**:
  - `/auth/login`에 머묾
  - 오류 메시지 표시 (토스트 또는 인라인)
- **결과**: ⏳

#### TC-WEB-AUTH-004: 존재하지 않는 이메일로 로그인 실패
- **우선순위**: P0
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/auth/login` 접속
  2. 이메일: `nobody@test.com`, 비밀번호: `Test123!` 입력
  3. "로그인" 버튼 클릭
- **기대결과**:
  - `/auth/login`에 머묾
  - 오류 메시지 표시
- **결과**: ⏳

#### TC-WEB-AUTH-005: 빈 필드로 로그인 시도
- **우선순위**: P1
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/auth/login` 접속
  2. 아무것도 입력하지 않고 "로그인" 버튼 클릭
- **기대결과**:
  - 폼 검증 오류 표시
  - `/auth/login`에 머묾
- **결과**: ⏳

#### TC-WEB-AUTH-006: 회원가입 페이지 표시 및 필드 확인
- **우선순위**: P0
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/auth/register` 접속
  2. 모든 필드 확인
- **기대결과**:
  - "회원가입" 제목 표시
  - 이름, 이메일, 전화번호, 비밀번호, 비밀번호 확인 필드 표시
  - 이용약관 동의 체크박스 표시
  - "회원가입" 버튼 표시
- **결과**: ⏳

#### TC-WEB-AUTH-007: 신규 사용자 회원가입 성공
- **우선순위**: P0
- **전제조건**: 비로그인 상태, 해당 이메일 미등록
- **단계**:
  1. `/auth/register` 접속
  2. 이름: `새회원`, 이메일: `newuser_[timestamp]@test.com`
  3. 전화번호: `010-1234-5678`
  4. 비밀번호: `NewUser123!`, 비밀번호 확인: `NewUser123!`
  5. 이용약관 동의 체크
  6. "회원가입" 버튼 클릭
- **기대결과**:
  - 자동 로그인 후 홈페이지 리다이렉트
  - 헤더에 "새회원님" 표시
- **DB 검증**: `User` 테이블에 새 레코드 생성, `role = USER`, `isActive = true`
- **결과**: ⏳

#### TC-WEB-AUTH-008: 중복 이메일로 회원가입 실패
- **우선순위**: P1
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/auth/register` 접속
  2. 이메일: `test@example.com` (기존 사용자)으로 가입 시도
- **기대결과**:
  - 오류 메시지 표시 ("이미 사용 중인 이메일")
  - `/auth/register`에 머묾
- **결과**: ⏳

#### TC-WEB-AUTH-009: 비밀번호 유효성 검증 (약한 비밀번호)
- **우선순위**: P1
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/auth/register` 접속
  2. 비밀번호: `123` (8자 미만, 특수문자/대문자 없음) 입력
- **기대결과**:
  - 비밀번호 강도 오류 메시지 표시
- **결과**: ⏳

#### TC-WEB-AUTH-010: 로그아웃 정상 동작
- **우선순위**: P0
- **전제조건**: 로그인 상태
- **단계**:
  1. 로그인 수행
  2. 헤더의 "로그아웃" 버튼 클릭
- **기대결과**:
  - 홈페이지로 이동
  - 헤더에 "로그인" 링크 표시 (비로그인 상태)
  - localStorage 토큰 제거됨
- **결과**: ⏳

#### TC-WEB-AUTH-011: 비인증 사용자 보호 페이지 접근 시 리다이렉트
- **우선순위**: P0
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/my/transactions` 접속 시도
  2. `/my/profile` 접속 시도
  3. `/sell` 접속 시도
  4. `/my/cart` 접속 시도
- **기대결과**:
  - 모든 경우 `/auth/login`으로 리다이렉트
- **결과**: ⏳

#### TC-WEB-AUTH-012: 로그인 후 원래 페이지로 리다이렉트
- **우선순위**: P1
- **전제조건**: 비로그인 상태
- **단계**:
  1. `/sell` 접속 시도 → `/auth/login?redirect=/sell`로 이동
  2. 로그인 수행
- **기대결과**:
  - 로그인 후 `/sell` 페이지로 이동 (원래 의도한 페이지)
- **결과**: ⏳

---

### 2.2 상품 탐색 (BROWSE)

#### TC-WEB-BROWSE-001: 홈페이지 전체 섹션 표시
- **우선순위**: P1
- **전제조건**: 없음
- **단계**:
  1. `/` 접속
- **기대결과**:
  - 히어로 섹션 표시
  - "인기 상품" 섹션 표시
  - "실거래 리뷰" 섹션 표시
  - 신뢰 요소 표시
- **결과**: ⏳

#### TC-WEB-BROWSE-002: 구매하기 페이지 기본 표시
- **우선순위**: P0
- **전제조건**: 시드 상품 데이터 존재
- **단계**:
  1. `/buy` 접속
- **기대결과**:
  - "구매하기" 제목 표시
  - 상품 카드 목록 표시
  - 필터 사이드바 표시
- **결과**: ⏳

#### TC-WEB-BROWSE-003: 카테고리 필터 동작
- **우선순위**: P1
- **결과**: ⏳

#### TC-WEB-BROWSE-004: 브랜드 필터 동작
- **우선순위**: P1
- **결과**: ⏳

#### TC-WEB-BROWSE-005: 등급 필터 동작
- **우선순위**: P1
- **결과**: ⏳

#### TC-WEB-BROWSE-006: 용량 필터 동작
- **우선순위**: P2
- **결과**: ⏳

#### TC-WEB-BROWSE-007: 가격대 필터 동작
- **우선순위**: P2
- **결과**: ⏳

#### TC-WEB-BROWSE-008: 복합 필터 동작
- **우선순위**: P1
- **결과**: ⏳

#### TC-WEB-BROWSE-009: 정렬 기능 (최신순)
- **우선순위**: P2
- **결과**: ⏳

#### TC-WEB-BROWSE-010: 정렬 기능 (가격 낮은순/높은순)
- **우선순위**: P2
- **결과**: ⏳

#### TC-WEB-BROWSE-011: 페이지네이션 동작
- **우선순위**: P2
- **결과**: ⏳

#### TC-WEB-BROWSE-012: 상품 상세 페이지 표시
- **우선순위**: P0
- **결과**: ⏳

#### TC-WEB-BROWSE-013: 상품 상세 - 이미지 갤러리 동작
- **우선순위**: P2
- **결과**: ⏳

#### TC-WEB-BROWSE-014: 유사 상품 표시
- **우선순위**: P2
- **결과**: ⏳

#### TC-WEB-BROWSE-015: 존재하지 않는 상품 접근
- **우선순위**: P2
- **결과**: ⏳

---

### 2.3 장바구니 (CART)

#### TC-WEB-CART-001: 상품 장바구니 추가
- **우선순위**: P0
- **결과**: ⏳

#### TC-WEB-CART-002: 중복 상품 장바구니 추가 방지
- **우선순위**: P1
- **결과**: ⏳

#### TC-WEB-CART-003: 장바구니 페이지 표시
- **우선순위**: P0
- **결과**: ⏳

#### TC-WEB-CART-004: 장바구니 상품 개별 삭제
- **우선순위**: P1
- **결과**: ⏳

#### TC-WEB-CART-005: 장바구니 선택 삭제 (벌크)
- **우선순위**: P1
- **결과**: ⏳

#### TC-WEB-CART-006: 빈 장바구니 표시
- **우선순위**: P2
- **결과**: ⏳

#### TC-WEB-CART-007: 장바구니 localStorage 유지
- **우선순위**: P1
- **결과**: ⏳

#### TC-WEB-CART-008: 비로그인 시 장바구니 접근
- **우선순위**: P1
- **결과**: ⏳

---

### 2.4 주문/결제 (ORDER)

#### TC-WEB-ORDER-001 ~ 010
- 체크아웃, 배송지, 결제, 주문내역 관련 10개 테스트
- **결과**: ⏳

---

### 2.5 판매 접수 (SELL)

#### TC-WEB-SELL-001 ~ 010
- 판매 4단계 프로세스, 견적, 운송장 등 10개 테스트
- **결과**: ⏳

---

### 2.6 사용자 계정 (ACCT)

#### TC-WEB-ACCT-001 ~ 012
- 프로필, 비밀번호, 배송지, 거래내역 등 12개 테스트
- **결과**: ⏳

---

### 2.7 리뷰 (REVIEW)

#### TC-WEB-REVIEW-001 ~ 010
- 리뷰 목록, 필터, 작성, 삭제 등 10개 테스트
- **결과**: ⏳

---

### 2.8 시세 조회 (PRICE)

#### TC-WEB-PRICE-001 ~ 006
- 시세 조회, 필터, 검색 등 6개 테스트
- **결과**: ⏳

---

### 2.9 콘텐츠 페이지 (CONTENT)

#### TC-WEB-CONTENT-001 ~ 010
- 공지사항, FAQ, 이벤트, 가이드 등 10개 테스트
- **결과**: ⏳

---

### 2.10 네비게이션/레이아웃 (NAV)

#### TC-WEB-NAV-001 ~ 008
- 헤더, 푸터, 네비게이션, 드롭다운 등 8개 테스트
- **결과**: ⏳

---

## 3. ADMIN 단위 기능 테스트

### 3.1 ~ 3.8: 총 52개 테스트
- 관리자 인증 (5), 대시보드 (4), 사용자 관리 (6)
- 상품 관리 (8), 주문 관리 (6), 매입 관리 (7)
- CMS 관리 (10), 슈퍼관리자 (6)
- **결과**: ⏳

---

## 4. 통합 테스트

### 4.1 ~ 4.4: 총 13개 테스트
- 구매자 여정 (3), 판매자 여정 (3)
- 관리자 운영 (4), 교차 기능 (3)
- **결과**: ⏳

---

## 5. 테스트 결과 요약

| 영역 | 총 TC | PASS | FAIL | SKIP | 비고 |
|------|-------|------|------|------|------|
| WEB-AUTH | 12 | - | - | - | |
| WEB-BROWSE | 15 | - | - | - | |
| WEB-CART | 8 | - | - | - | |
| WEB-ORDER | 10 | - | - | - | |
| WEB-SELL | 10 | - | - | - | |
| WEB-ACCT | 12 | - | - | - | |
| WEB-REVIEW | 10 | - | - | - | |
| WEB-PRICE | 6 | - | - | - | |
| WEB-CONTENT | 10 | - | - | - | |
| WEB-NAV | 8 | - | - | - | |
| ADM-AUTH | 5 | - | - | - | |
| ADM-DASH | 4 | - | - | - | |
| ADM-USER | 6 | - | - | - | |
| ADM-PROD | 8 | - | - | - | |
| ADM-ORD | 6 | - | - | - | |
| ADM-SELLMGT | 7 | - | - | - | |
| ADM-CMS | 10 | - | - | - | |
| ADM-SUPER | 6 | - | - | - | |
| INT-BUY | 3 | - | - | - | |
| INT-SELL | 3 | - | - | - | |
| INT-ADM | 4 | - | - | - | |
| INT-CROSS | 3 | - | - | - | |
| **합계** | **166** | **-** | **-** | **-** | |

---

## 6. 테스트 실행 결과 (2026-02-27)

### 6.1 전체 통계

| 항목 | 수 |
|------|-----|
| 총 실행 | 90 |
| PASS | 82 |
| FAIL | 8 |
| 미실행 | 76 |
| 통과율 | 91.1% |

### 6.2 FAIL 목록

| TC ID | 테스트명 | 우선순위 | 현상 | 버그 리포트 |
|-------|---------|---------|------|------------|
| TC-WEB-BROWSE-003 | 카테고리 필터 동작 | P1 | URL에 category 파라미터 미반영 | [리포트](../docs/bug_report/TC-WEB-BROWSE-003-카테고리필터.md) |
| TC-WEB-BROWSE-004 | 브랜드 필터 동작 | P1 | URL에 brand 파라미터 미반영 | [리포트](../docs/bug_report/TC-WEB-BROWSE-004-브랜드필터.md) |
| TC-WEB-BROWSE-008 | 복합 필터 동작 | P1 | 개별 필터 버그 연쇄 실패 | [리포트](../docs/bug_report/TC-WEB-BROWSE-008-복합필터.md) |
| TC-WEB-CONTENT-004 | 이벤트 페이지 | P3 | /events 페이지 타임아웃 | [리포트](../docs/bug_report/TC-WEB-CONTENT-004-이벤트페이지.md) |
| TC-WEB-CART-002 | 중복 장바구니 방지 | P1 | 장바구니 버튼 클릭 타임아웃 | [리포트](../docs/bug_report/TC-WEB-CART-002-중복장바구니.md) |
| TC-WEB-PRICE-003 | 브랜드별 시세 필터 | P2 | 브랜드 필터 UI 미표시 | [리포트](../docs/bug_report/TC-WEB-PRICE-003-브랜드시세필터.md) |
| TC-ADM-AUTH-004 | 비로그인 관리 접근 차단 | **P0** | 비로그인 시 대시보드 접근 가능 | [리포트](../docs/bug_report/TC-ADM-AUTH-004-비로그인접근차단.md) |
| TC-WEB-ORDER-010 | 비로그인 체크아웃 차단 | **P0** | /buy로 리다이렉트 (정상: /auth/login) | [리포트](../docs/bug_report/TC-WEB-ORDER-010-비로그인체크아웃.md) |

### 6.3 보안 취약점 (즉시 수정 필요)

1. **TC-ADM-AUTH-004**: Admin 대시보드가 비로그인 상태에서도 접근 가능
2. **TC-WEB-ORDER-010**: 체크아웃 인증 리다이렉트 대상이 올바르지 않음

### 6.4 영역별 결과

| 영역 | 실행 | PASS | FAIL | 통과율 |
|------|------|------|------|--------|
| WEB-AUTH | 12 | 12 | 0 | 100% |
| WEB-BROWSE | 15 | 12 | 3 | 80% |
| WEB-CART | 6 | 5 | 1 | 83% |
| WEB-ORDER | 3 | 2 | 1 | 67% |
| WEB-SELL | 6 | 6 | 0 | 100% |
| WEB-ACCT | 4 | 4 | 0 | 100% |
| WEB-REVIEW | 5 | 5 | 0 | 100% |
| WEB-PRICE | 6 | 5 | 1 | 83% |
| WEB-CONTENT | 10 | 9 | 1 | 90% |
| WEB-NAV | 8 | 8 | 0 | 100% |
| ADM-AUTH | 5 | 4 | 1 | 80% |
| ADM-DASH | 4 | 4 | 0 | 100% |
| ADM-PROD | 4 | 3 | 1 | 75% |
| ADM-ORD | 3 | 3 | 0 | 100% |
| ADM-SELLMGT | 3 | 3 | 0 | 100% |
| ADM-USER | 4 | 4 | 0 | 100% |
| ADM-CMS | 2 | 2 | 0 | 100% |
| ADM-SUPER | 2 | 2 | 0 | 100% |

### 6.5 미실행 테스트 사유

데이터 생성/수정이 필요한 테스트 (76건):
- 결제 프로세스 (Toss Payments 연동 필요)
- 주문 상태 변경 워크플로우 (관리자 조작 필요)
- 매입 견적/검수 프로세스 (관리자-사용자 교차 필요)
- 프로필/배송지 CUD 조작
- 리뷰 작성/삭제 (완료된 주문 필요)
- 관리자 상품/콘텐츠 CRUD
- 통합 테스트 전체 (INT-BUY, INT-SELL, INT-ADM, INT-CROSS)

---

## 7. 버그 리포트

발견된 버그는 `/docs/bug_report/TC-XXX-이름.md` 파일로 생성됩니다.
